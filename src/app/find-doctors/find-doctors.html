<header class="header">
  <div class="header-content">
    <h1>Find Your Doctor</h1>
    <p>Search and filter experienced medical professionals</p>

    <div class="search-section">
      <input
        type="text"
        placeholder="Search by name, specialization, or qualification..."
        (input)="onSearch($event)"
        [value]="searchQuery"
        class="search-input"
      />
      <button (click)="performSearch()" class="btn search-btn">Search</button>
    </div>
  </div>
</header>

<div class="main-container">
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="filter-header">
      <h3>Filter by Specialization</h3>
      <button *ngIf="activeFilters.size > 0 || searchQuery"
              (click)="clearFilters()" class="btn clear-btn">Clear</button>
    </div>

    <ul class="filter-list">
      <li *ngFor="let specialization of specializations">
        <label>
          <input type="checkbox"
                 [checked]="activeFilters.has(specialization)"
                 (change)="toggleFilter(specialization)" />
          {{ specialization }}
        </label>
      </li>
    </ul>

    <div *ngIf="activeFilters.size > 0" class="active-filters">
      <h4>Active Filters</h4>
      <div class="tags">
        <span *ngFor="let filter of activeFilters" class="tag">{{ filter }}</span>
      </div>
    </div>
  </aside>

  <!-- Doctors List -->
  <main class="content">
    <div *ngIf="isLoading" class="state-box">
      <div class="spinner"></div>
      <p>Loading doctors...</p>
    </div>

    <div *ngIf="errorMessage && !isLoading" class="state-box error">
      <h3>⚠️ Failed to load doctors</h3>
      <p>{{ errorMessage }}</p>
      <button (click)="loadDoctors()" class="btn retry-btn">Retry</button>
    </div>

    <div *ngIf="!isLoading && !errorMessage && filteredDoctors.length === 0 && hasSearched" class="state-box">
      <h3>No Results</h3>
      <p>No doctors found for your search.</p>
      <button (click)="clearFilters()" class="btn retry-btn">Clear Search</button>
    </div>

    <div *ngIf="!isLoading && !errorMessage && filteredDoctors.length > 0">
      <p class="results-info">Showing {{ filteredDoctors.length }} of {{ doctors.length }} doctors</p>

      <div class="doctors-grid">
        <article *ngFor="let doctor of filteredDoctors" class="doctor-card">
          <img src="assets/doctor-default.png" alt="Doctor Photo" class="doctor-img" />

          <div class="doctor-details">
            <h2>{{ doctor.name }}</h2>
            <p class="specialization">{{ doctor.specialization }}</p>
            <p class="qualification">MBBS {{ doctor.qualification }}</p>
          

            <p><strong>Experience:</strong> {{ getYearsOfExperience(doctor.experience) }}</p>
            <button (click)="selectDoctor(doctor)" class="btn book-btn">Book Appointment</button>
          </div>
        </article>
      </div>
    </div>
  </main>
</div>
