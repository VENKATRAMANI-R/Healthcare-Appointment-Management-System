<div class="dashboard-wrapper">
  <!-- Top Navigation Bar -->
  <header class="top-bar">
    <div class="brand">
      <div class="brand-logo">
        assets/images/healwell-logo.png
      </div>
      <span class="brand-name">HealWell Doctor</span>
    </div>
    <div class="context-info">
      <span class="material-icons">event</span>
      <span class="date-display">{{ formattedDate }}</span>
    </div>
    <div>
      <i class="material-icons notification" (click)="openNotifications()">notifications</i>
    </div>
    <div class="profile-section">
      <button class="profile-btn" (click)="openProfile()">
        <div class="profile-avatar"></div>
        <span>Dr.{{ doctorName }}</span>
        <span class="material-icons">keyboard_arrow_down</span>
      </button>
    </div>
    <div class="profile-dropdown" *ngIf="AccountDropdownState">
          <a class="dropdown-link" (click)="goToUserProfile()">Account Details</a>
          <a class="dropdown-link" (click)="logout()">Logout</a>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Hero Cards Section -->
    <section class="hero-section">
      <!-- Availability Card -->
      <div class="card availability-card">
        
        <div class="card-content">
          <div class="status-display">
            <span class="material-icons status-icon">local_hospital </span>
            <div class="status-info">
              <div class="status-label">Welcome Dr.{{ doctorName }}</div>
              <div class="status-subtitle">Building a nation of wellness</div>
            </div>
          </div>
          <div class="availability-controls">
            <button class="btn btn-outline" (click)="manageSlots()">
              <span class="material-icons">schedule</span>
              Manage Slots
            </button>
            <button class="btn btn-outline" (click)="listConsultation()">
              <span class="material-icons">list_alt</span>
              Consultations
            </button>
          </div>
        </div>
      </div>

    </section>

    <!-- Today's Appointments Section -->
    <section class="appointments-section">
      <div class="section-header">
        <h2>Today's Schedule</h2>
        <div class="section-controls">
          <div class="search-box">
            <span class="material-icons search-icon">search</span>
            <input
              type="text"
              placeholder="Search patients..."
              (input)="onSearch($event)"
              class="search-input">
          </div>
        </div>
      </div>

      <div class="appointments-container">
        <div class="appointments-table-wrapper">
          <table class="appointments-table" >
            <thead (click)="('table-header')">
              <tr>
                <th>
                  Start
                  <!-- <span class="material-icons sort-indicator">{{ ('startTime') }}</span> -->
                </th>
                <th>
                  End
                  <!-- <span class="material-icons sort-indicator">{{ ('endTime') }}</span> -->
                </th>
                <th>
                  Patient Name
                  <!-- <span class="material-icons sort-indicator">{{ ('patientName') }}</span> -->
                </th>
                <th>
                  Reason
                </th>
                <th>
                  Status
                </th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let appointment of currentPageAppointments; trackBy: trackByAppointmentId">
                <td>{{ appointment.startTime }}</td>
                <td>{{ appointment.endTime }}</td>
                <td>
                  <div class="patient-info">
                    <div class="patient-avatar">{{ getPatientInitial(appointment.patientName) }}</div>
                    <div class="patient-details">
                      <div class="patient-name">{{ appointment.patientName }}</div>
                      <!-- <div class="patient-meta">{{ appointment.age }}y â€¢ {{ appointment.gender }}</div> -->
                    </div>
                  </div>
                </td>
                <td>{{ appointment.reason }}</td>
                <td>
                  <span [class]="getStatusBadgeClass(appointment.status)">{{ appointment.status }}</span>
                </td>
                <td>
                  <div class="table-actions">
                    <!--consultation-form-->
                    <button
                      class="btn btn-outline"
                        (click)="openConsultationForm(appointment)"
                        [disabled]="appointment.status.toLowerCase() === 'completed' || appointment.status.toLowerCase() === 'cancelled'">
                      <span class="material-icons">assignment</span>
                       Consultation Form
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>
  </main>


  <!-- Toast Notifications -->
  <div class="toast-container">
    <div *ngFor="let toast of toasts"
         [class]="'toast toast-' + toast.type"
         [@slideIn]>
      <span class="material-icons">
        {{ toast.type === 'success' ? 'check_circle' : toast.type === 'error' ? 'error' : 'info' }}
      </span>
      <span>{{ toast.message }}</span>
      <button class="toast-close" (click)="removeToast(toast.id)">
        <span class="material-icons">close</span>
      </button>
    </div>
  </div>
</div>